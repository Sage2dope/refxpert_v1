{%extends "refxpert/base.html"%}

{%block content%}
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<main class="py-6 px-8">
    <form action="https://formspree.io/f/mrgwnavk" method= "POST" class="space-y-4">
      <h2 class="text-base font-bold leading-7 text-gray-900">Apply for {{ job.title }}</h2>
      {% csrf_token %}
      <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
        <dt class="text-sm font-medium leading-6 text-gray-900">First Name</dt>
          <label for="FirstName" class="relative block overflow-hidden rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-blue-950 focus-within:ring-1 focus-within:ring-blue-950" >
              <input
              type="text"
              name="first_name" 
              placeholder="First Name"
              required
              class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
              />
          </label>
    </div>

    <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
      <dt class="text-sm font-medium leading-6 text-gray-900">Last Name</dt>
        <label for="LastName" class="relative block overflow-hidden rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-blue-950 focus-within:ring-1 focus-within:ring-blue-9500" >
            <input
            type="text" 
            name="last_name"
            placeholder="Last Name"
            required
            class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
            />
        </label>
    </div>

        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm font-medium leading-6 text-gray-900">Email address</dt>
            <label for="UserEmail" class="relative block overflow-hidden rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-blue-950 focus-within:ring-1 focus-within:ring-blue-9500" >
                <input
                type="email"
                name="email"
                placeholder="Email"
                required
                class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
                />
            </label>
        </div>

        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm font-medium leading-6 text-gray-900">Phone</dt>
            <label for="Phone" class="relative block overflow-hidden rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-blue-950 focus-within:ring-1 focus-within:ring-blue-9500" >
                <input
                type="Phone" 
                name="phone" 
                placeholder="Phone Number"
                required
                class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
                />
            </label>
        </div>

        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm font-medium leading-6 text-gray-900">Link to CV/Portfolio</dt>
            <label for="text" class="relative block overflow-hidden rounded-md border border-gray-200 px-3 pt-3 shadow-sm focus-within:border-blue-950 focus-within:ring-1 focus-within:ring-blue-9500" >
                <input
                type="text" 
                name="link"
                placeholder="Last Name"
                required
                class="peer h-8 w-full border-none bg-transparent p-0 placeholder-transparent focus:border-transparent focus:outline-none focus:ring-0 sm:text-sm"
                />
            </label>
        </div>

        <div class="px-4 py-6 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-0">
          <dt class="text-sm font-medium leading-6 text-gray-900">In not more than 300 words, <br> 
            please write why you are the most suitable candidate for this role.</dt>
          <label class="sr-only" for="message">Message</label>

          <textarea
            class="w-full rounded-lg border-gray-200 p-3 text-sm"
            placeholder="Message"
            rows="8"
            name="message"
            required
          ></textarea>
        </div>
        <script>
          function validateWordCount(textarea) {
              var wordCount = textarea.value.split(/\s+/).filter(function(item) {
                  return item !== '';
              }).length;
          
              if (wordCount > 300) {
                  alert('Your message must be 300 words or less.');
                  textarea.setCustomValidity('Your message must be 300 words or less.');
              } else {
                  textarea.setCustomValidity('');
              }
          }
          </script>
        <script>
          {%for msg in messages%}
          swal('{{msg}}');
          {% endfor %}
        </script>

        <button
        type="submit"
        class="inline-block w-full rounded-lg bg-blue-950 px-5 py-3 font-medium text-white sm:w-auto"
      >Submit Application</button>
    </form>
</main>
{% endblock %}